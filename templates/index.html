<!-- ✅ ...ส่วนอื่นเหมือนเดิม -->
<div class="controls">
  <label for="style-select">เลือกโทนเสียง:</label>
  <select id="style-select">
    <option value="normal">ปกติ</option>
    <option value="fast">เร็ว</option>
    <option value="slow">ช้า</option>
    <option value="child">เสียงเด็ก</option>
    <option value="deep">เสียงผู้ใหญ่</option>
  </select>

  <button onclick="convertText()">Convert</button>
  <button onclick="playAudio()" disabled id="play-btn">เล่นเสียง</button>
  <button onclick="downloadAudio()" disabled id="download-btn">ดาวน์โหลด</button>
</div>
<!-- ✅ ... -->

<script>
  let audioBlobUrl = null;

  async function convertText() {
    const text = document.getElementById('text-input').value;
    const style = document.getElementById('style-select').value;
    const statusEl = document.getElementById('status');
    statusEl.textContent = 'กำลังแปลงเสียง...';
    statusEl.style.color = 'green';

    try {
      const response = await fetch('/api/convert', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ text, style }) // ✅ ส่ง style แทน speed
      });

      if (!response.ok) {
        statusEl.textContent = '❌ เกิดข้อผิดพลาดในการแปลงเสียง';
        statusEl.style.color = 'red';
        return;
      }

      const blob = await response.blob();
      audioBlobUrl = URL.createObjectURL(blob);

      const audio = document.getElementById('audio-player');
      audio.src = audioBlobUrl;

      statusEl.textContent = '✅ แปลงไฟล์สำเร็จ';
      statusEl.style.color = 'blue';

      document.getElementById('play-btn').disabled = false;
      document.getElementById('download-btn').disabled = false;

      updateStats();

    } catch (error) {
      statusEl.textContent = '❌ ไม่สามารถเชื่อมต่อเซิร์ฟเวอร์ได้';
      statusEl.style.color = 'red';
      console.error(error);
    }
  }

  // ฟังก์ชันอื่นเหมือนเดิม ...
</script>
